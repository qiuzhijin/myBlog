<html>
<head>
    <meta charset="utf-8" />ï»¿
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>ä½¿ç”¨ frp å®ç° Windows è¿œç¨‹æ¡Œé¢è¿æ¥æ•™ç¨‹ | çŸ¥è¯†æµ·æ´‹</title>

<link rel="shortcut icon" href="https://www.qiuzhijin.tk/blog/favicon.ico?v=1657086197808">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://www.qiuzhijin.tk/blog/styles/main.css">
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"> -->

<style>
    hr {
        margin-top: 1rem;
        margin-bottom: 1rem;
        border: 0;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
    }
</style>
<script>
	function stop(){
	return false;
	}
	document.ondragstart=stop;
	document.oncontextmenu=stop;
	document.Î¿ncÎ¿py=stop;
	document.onselectstart=stop;
	document.ondragover=stop;
</script>
<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script> -->
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/blog/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            çŸ¥è¯†æµ·æ´‹
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="changeNavbar">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/blog/" class="menu gt-a-link">
                    é¦–é¡µ
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/blog/archives" class="menu gt-a-link">
                    å½’æ¡£
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/blog/tags" class="menu gt-a-link">
                    æ ‡ç­¾
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/blog/post/about" class="menu gt-a-link">
                    å…³äº
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="https://www.qiuzhijin.tk/" class="menu gt-a-link">
                    ğŸŒä¸ªäººä¸»é¡µ
                </a>
                
            </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1657086197808"
                action="/blog/search/">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>
<script>
    /* ç§»åŠ¨ç«¯å¯¼èˆªæ å±•å¼€/æ”¶èµ·åˆ‡æ¢ */
    document.getElementById('changeNavbar').onclick = () => {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else {
            element.style.display = 'none';
        }
    }
</script>
    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    ä½¿ç”¨ frp å®ç° Windows è¿œç¨‹æ¡Œé¢è¿æ¥æ•™ç¨‹
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2021-07-06 Â·
                    </time>
                    
                </div>
                <div class="post-content">
                    <h1 id="ä¸€-frp-ä»‹ç»">ä¸€ã€frp ä»‹ç»</h1>
<p>é¡¹ç›®åœ°å€ï¼šhttps://github.com/fatedier/frp</p>
<p>FRP (Fast Reverse Proxy) æ˜¯ä¸€ä¸ªå¯ç”¨äºå†…ç½‘ç©¿é€çš„é«˜æ€§èƒ½çš„åå‘ä»£ç†åº”ç”¨ï¼Œæ”¯æŒ TCP ï¼Œ UDP ï¼Œ HTTP ï¼Œ HTTPS åè®®ï¼Œå¯ä»¥å®ç° Windows è¿œç¨‹æ¡Œé¢æ­å»ºã€‚</p>
<p>ä½¿ç”¨ä½“éªŒï¼šæ­å»ºå¥½äº† frpï¼Œç”¨äº†ä¸‹è¿œç¨‹æ¡Œé¢ï¼Œå‘ç°é€Ÿåº¦æ¯” AnyDesk å¿«ä¸å°‘ï¼Œè·Ÿ TeamViewer å·®ä¸å¤šï¼ŒTeamViewer æœ€è¿‘å•†ä¸šåŒ–æŸ¥çš„è¶Šæ¥è¶Šä¸¥äº†ï¼Œæ˜æ˜æ˜¯è‡ªç”¨ï¼Œä¹Ÿä¼šæé†’ä½ å•†ä¸šä½¿ç”¨ï¼Œæ‰€ä»¥æ­å»ºä¸€ä¸ª frp æœåŠ¡å™¨ä½œä¸ºæ›¿ä»£ï¼ˆå¤‡ç”¨ï¼‰è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p>
<h1 id="äºŒ-å‡†å¤‡å·¥ä½œ">äºŒã€å‡†å¤‡å·¥ä½œ</h1>
<p>éœ€è¦ï¼š</p>
<ul>
<li>ä¸€ä¸ªæœ‰å…¬ç½‘ IP çš„ VPS æœåŠ¡å™¨</li>
</ul>
<p>å¦‚æœä½ éœ€è¦è¿æ¥çš„æœåŠ¡å™¨åœ¨å›½å†…ï¼Œé‚£ä¹ˆç›´æ¥é€‰æ‹©é˜¿é‡Œäº‘æˆ–è€…è…¾è®¯äº‘éƒ½è¡Œï¼Œç°åœ¨è½»é‡åº”ç”¨æœåŠ¡å™¨ä»·æ ¼éƒ½éå¸¸ä¾¿å®œï¼Œå­¦ç”Ÿçš„è¯æ›´æ˜¯å‡ åå—é’± / å¹´å°±èƒ½ä¹°åˆ° 5M å¸¦å®½çš„è½»é‡ï¼Œç”¨æ¥åšè¿œç¨‹è¿æ¥å®Œå…¨å¤Ÿäº†ã€‚</p>
<p>å­¦ç”Ÿä¼˜æƒ ï¼š</p>
<ul>
<li>è…¾è®¯äº‘å­¦ç”Ÿï¼šhttps://cloud.tencent.com/act/campus</li>
<li>é˜¿é‡Œäº‘å­¦ç”Ÿï¼šhttps://developer.aliyun.com/plan/grow-up</li>
</ul>
<p>å…¶ä»–ä¼˜æƒ ï¼š</p>
<ul>
<li>è…¾è®¯äº‘ç§’æ€ï¼šhttps://cloud.tencent.com</li>
<li>é˜¿é‡Œäº‘äº‘å°ç«™ï¼šhttps://www.aliyun.com/minisite/goods</li>
</ul>
<h1 id="ä¸‰-frp-æœåŠ¡å™¨ç«¯æ­å»º">ä¸‰ã€frp æœåŠ¡å™¨ç«¯æ­å»º</h1>
<p>ä¸‹è½½åœ°å€ï¼šhttps://github.com/fatedier/frp/releases</p>
<p>ä¸€èˆ¬æœåŠ¡å™¨éƒ½æ˜¯ Linux ç³»ç»Ÿçš„ï¼Œç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ 0.36.2ï¼Œç›´æ¥ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ï¼š<br>
<code>wget https://github.com/fatedier/frp/releases/download/v0.36.2/frp_0.36.2_linux_amd64.tar.gz</code></p>
<p>è§£å‹ï¼š</p>
<p><code>tar -zxvf frp_0.36.2_linux_amd64.tar.gz</code><br>
è‡³æ­¤ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª<code> frp_0.36.2_linux_amd64</code> çš„æ–‡ä»¶å¤¹ï¼Œè¿›å…¥æ–‡ä»¶å¤¹ï¼š</p>
<p><code>cd frp_0.36.2_linux_amd64</code></p>
<p>ä½œä¸ºæœåŠ¡å™¨ç«¯ï¼Œä½ åªéœ€è¦å…³å¿ƒ 2 ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li>frps</li>
<li>frps.ini<br>
å…¶ä¸­ frps æ˜¯è¿è¡Œç¨‹åºï¼Œfrps.ini æ˜¯é…ç½®æ–‡ä»¶ã€‚</li>
</ul>
<p>ä¿®æ”¹ frps.ini ï¼š</p>
<p><code>vi frps.ini</code><br>
æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="language-[common]">bind_port = 7000
dashboard_port = 7500
token = token
dashboard_user = user
dashboard_pwd = pwd
</code></pre>
<p>è¿™é‡Œä¸»è¦æ˜¯é…ç½®äº†ç»‘å®šçš„ç«¯å£ï¼ˆ7000ï¼‰ï¼Œæ§åˆ¶é¢æ¿çš„ç«¯å£ï¼ˆ7500ï¼‰ï¼Œtokenï¼ˆä¼šåœ¨å®¢æˆ·ç«¯ç”¨åˆ°ï¼‰ï¼Œæ§åˆ¶é¢æ¿çš„ user ç”¨æˆ·åå’Œ pwd å¯†ç ã€‚</p>
<p>è¿è¡Œ frp å®¢æˆ·ç«¯ï¼š<br>
<code>./frps -c frps.ini</code></p>
<p>å¦‚æœæ²¡æœ‰é—®é¢˜çš„è¯ï¼Œå°±ä¼šç›´æ¥è¿è¡ŒæˆåŠŸäº†ï¼š<br>
<code>frps started successfully</code><br>
é€šè¿‡ï¼ˆhttp://152.67.<em>.</em>:7500ï¼‰å¯ä»¥è®¿é—®æ§åˆ¶é¢æ¿äº†ã€‚</p>
<p>å¯ä»¥å€ŸåŠ© nohup åå°è¿è¡Œ frpsï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š<br>
<code>nohup ./frps -c frps.ini &gt; /root/frp/log.log 2&gt;&amp;1 &amp;</code></p>
<p><strong>é€šè¿‡systemclè®¾ç½®å¼€æœºè‡ªå¯åŠ¨</strong><br>
å°†frpsæ³¨å†Œä¸ºç³»ç»ŸæœåŠ¡</p>
<pre><code>[root@frp_server ~]# vim /usr/lib/systemd/system/frps.service
[Unit]
Description=frp server
After=network.target

[Service]
Type=simple

ExecStart=/usr/local/frp_server/frps -c /usr/local/frp_server/frps.ini
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/bin/kill -s QUIT $MAINPID

[Install]
WantedBy=multi-user.target
[root@frp_server ~]# systemctl enable frps
</code></pre>
<pre><code>[root@frp_server ~]# systemctl start  frps.service
[root@frp_server ~]# systemctl status frps
 frps.service - frp server
   Loaded: loaded (/usr/lib/systemd/system/frps.service; disabled; vendor preset: disabled)
   Active: active (running) since Tue 2018-09-25 17:47:44 CST; 20s ago
 Main PID: 4168 (frps)
   CGroup: /system.slice/frps.service
           â””â”€4168 /usr/local/frp_server/frps -c /usr/local/frp_server/frps.ini

Sep 25 17:47:44 frp_server systemd[1]: Started frp server.
Sep 25 17:47:44 frp_server systemd[1]: Starting frp server...
</code></pre>
<h1 id="å››-frp-å®¢æˆ·ç«¯é…ç½®">å››ã€frp å®¢æˆ·ç«¯é…ç½®</h1>
<p>ä¸‹è½½åœ°å€ï¼šhttps://github.com/fatedier/frp/releases</p>
<p>åŒæ ·æ˜¯ä¸‹è½½ releasesï¼Œä»¥ Windows ä¸ºä¾‹ï¼Œä¸‹è½½ä¸æœåŠ¡å™¨ç«¯å¯¹åº”ç‰ˆæœ¬çš„ frp_0.36.2_windows_amd64.zipã€‚</p>
<p>ä½œä¸ºå®¢æˆ·ç«¯ç«¯ï¼Œä½ åªéœ€è¦å…³å¿ƒ 2 ä¸ªæ–‡ä»¶ï¼š</p>
<ul>
<li>frpc</li>
<li>frpc.ini<br>
ç¼–è¾‘ <code>frpc.ini </code>æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹å†…å®¹ï¼š</li>
</ul>
<pre><code class="language-[common]">server_addr = 152.67.*.*
server_port = 7000
token = token
[rdp]
type = tcp
local_ip = 127.0.0.1
local_port = 3389
remote_port = 7001
[smb]
type = tcp
local_ip = 127.0.0.1
local_port = 445
remote_port = 7002
</code></pre>
<p>â€œserver_addrâ€æ˜¯æœåŠ¡ç«¯ IP åœ°å€ï¼Œå¡«å…¥å³å¯ï¼Œâ€œserver_portâ€ä¸ºæœåŠ¡å™¨ç«¯å£ï¼Œå³ bind_port çš„å€¼ï¼Œâ€œtokenâ€æ˜¯ä½ åœ¨æœåŠ¡å™¨ä¸Šè®¾ç½®çš„è¿æ¥å£ä»¤ã€‚</p>
<p>è¿™é‡Œç”¨åˆ°äº† 2 ä¸ªè‡ªå®šä¹‰è§„åˆ™ï¼Œä¸€ä¸ªæ˜¯ rdpï¼Œä¸€ä¸ªæ˜¯ smbï¼š</p>
<ul>
<li>RDPï¼Œå³ Remote Desktop è¿œç¨‹æ¡Œé¢ï¼ŒWindows çš„ RDP é»˜è®¤ç«¯å£æ˜¯ 3389ï¼Œåè®®ä¸º TCPï¼Œæœ¬æ¡è§„åˆ™å¯ä»¥å®ç°è¿œç¨‹æ¡Œé¢è¿æ¥ã€‚</li>
<li>SMBï¼Œå³ Windows æ–‡ä»¶å…±äº«æ‰€ä½¿ç”¨çš„åè®®ï¼Œé»˜è®¤ç«¯å£å· 445ï¼Œåè®® TCPï¼Œæœ¬æ¡è§„åˆ™å¯å®ç°è¿œç¨‹æ–‡ä»¶è®¿é—®ã€‚<br>
æ‰“å¼€ cmdï¼Œè¿›å…¥ frp çš„ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿è¡Œ frp å®¢æˆ·ç«¯ï¼ˆä¸èƒ½åŒå‡» frpc.exeï¼‰ï¼š<br>
<code>frpc -c frpc.ini</code><br>
ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</li>
</ul>
<pre><code class="language-C:\Users\Administrator\frp_0.37.0_windows_amd64&gt;frpc">2021/07/06 08:40:09 [I] [service.go:304] [bb69e2195d1e242d] login to server success, get run id [bb69e2195d1e242d], server udp port [0]
2021/07/06 08:40:09 [I] [proxy_manager.go:144] [bb69e2195d1e242d] proxy added: [rdp smb ssh]
2021/07/06 08:40:09 [I] [control.go:180] [bb69e2195d1e242d] [rdp] start proxy success
2021/07/06 08:40:09 [I] [control.go:180] [bb69e2195d1e242d] [smb] start proxy success
2021/07/06 08:40:09 [I] [control.go:180] [bb69e2195d1e242d] [ssh] start proxy success
</code></pre>
<p>ä¹‹åå¼€å¯ Windows è¿œç¨‹è®¿é—®ï¼šWindows å¼€å¯è¿œç¨‹è®¿é—®ï¼Œç›´æ¥ç›´æ¥åœ¨æœ¬åœ°è¿œç¨‹è¿æ¥å³å¯ï¼Œåœ°å€å°±æ˜¯ 152.67.<em>.</em>:7001 ï¼ˆæœåŠ¡å™¨ IP å’Œç»‘å®šçš„ç«¯å£ï¼‰ï¼Œä¹‹åè¾“å…¥ç”¨æˆ·åå’Œå¯†ç å°±èƒ½æˆåŠŸè¿œç¨‹äº†ã€‚</p>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="https://www.qiuzhijin.tk/blog/post/rF02ORZs9/" class="post-title gt-a-link">
                    è’¸å‘æ³¢å¯¼å—æµ·è§‚æµ‹èˆªæ¬¡å³å°†æ¨å¸†èµ·èˆª-â€œä¸œæ–¹çº¢3â€
                </a>
            </div>
        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">çŸ¥è¯†æµ·æ´‹</div>
    <div class="social-container">
        
            
                <a href="https://github.com/qiuzhijin" target="_blank">
                    <i class="fab fa-github gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
                <a href="http://weibo.com/qiuzhijin/" target="_blank">
                    <i class="fab fa-weibo gt-c-content-color-first"></i>
                </a>
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        <p>Copyright <a target="_blak"
               class="peointr"
               href="http://www.qiuzhijin.tk/"
               title="ä¸ªäººä¸»é¡µ"
               style="color: gray">&copy;</a> 2015-2021 Zhijin Qiu.</p>
          <p>All rights reserved.</p>
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="https://www.qiuzhijin.tk/blog/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.highlightAll()
</script>

    </div>
</div>
</body>
</html>
